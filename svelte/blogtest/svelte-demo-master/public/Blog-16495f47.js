import { S as SvelteComponentDev, i as init, s as safe_not_equal, e as element, t as text, a as space, b as attr, c as add_location, d as insert, f as append, n as noop, g as detach, q as listen, r as destroy_each, u as run_all } from './chunk-4d16c660.js';

/* src/routes/Blog.svelte generated by Svelte v3.6.7 */

const file = "src/routes/Blog.svelte";

function get_each_context(ctx, list, i) {
	const child_ctx = Object.create(ctx);
	child_ctx.post = list[i];
	return child_ctx;
}

// (54:2) {#each posts as post}
function create_each_block(ctx) {
	var li, a, t0_value = ctx.post.title, t0, a_href_value, t1;

	return {
		c: function create() {
			li = element("li");
			a = element("a");
			t0 = text(t0_value);
			t1 = space();
			attr(a, "href", a_href_value = "/blog/" + ctx.post.id);
			add_location(a, file, 55, 6, 1080);
			add_location(li, file, 54, 4, 1069);
		},

		m: function mount(target, anchor) {
			insert(target, li, anchor);
			append(li, a);
			append(a, t0);
			append(li, t1);
		},

		p: noop,

		d: function destroy(detaching) {
			if (detaching) {
				detach(li);
			}
		}
	};
}

function create_fragment(ctx) {
	var t0, input0, t1, br, t2, input1, t3, h1, t5, ul, dispose;

	var each_value = posts;

	var each_blocks = [];

	for (var i = 0; i < each_value.length; i += 1) {
		each_blocks[i] = create_each_block(get_each_context(ctx, each_value, i));
	}

	return {
		c: function create() {
			t0 = space();
			input0 = element("input");
			t1 = space();
			br = element("br");
			t2 = space();
			input1 = element("input");
			t3 = space();
			h1 = element("h1");
			h1.textContent = "Recent posts";
			t5 = space();
			ul = element("ul");

			for (var i = 0; i < each_blocks.length; i += 1) {
				each_blocks[i].c();
			}
			document.title = "Blog";
			attr(input0, "class", "blog-title svelte-12zu22z");
			add_location(input0, file, 47, 0, 880);
			add_location(br, file, 48, 0, 937);
			attr(input1, "class", "blog-description svelte-12zu22z");
			add_location(input1, file, 49, 0, 944);
			add_location(h1, file, 50, 0, 1013);
			attr(ul, "class", "svelte-12zu22z");
			add_location(ul, file, 52, 0, 1036);

			dispose = [
				listen(input0, "input", ctx.input0_input_handler),
				listen(input1, "input", ctx.input1_input_handler)
			];
		},

		l: function claim(nodes) {
			throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option");
		},

		m: function mount(target, anchor) {
			insert(target, t0, anchor);
			insert(target, input0, anchor);

			input0.value = blogInfo.title;

			insert(target, t1, anchor);
			insert(target, br, anchor);
			insert(target, t2, anchor);
			insert(target, input1, anchor);

			input1.value = blogInfo.description;

			insert(target, t3, anchor);
			insert(target, h1, anchor);
			insert(target, t5, anchor);
			insert(target, ul, anchor);

			for (var i = 0; i < each_blocks.length; i += 1) {
				each_blocks[i].m(ul, null);
			}
		},

		p: function update(changed, ctx) {
			if (changed.blogInfo && (input0.value !== blogInfo.title)) input0.value = blogInfo.title;
			if (changed.blogInfo && (input1.value !== blogInfo.description)) input1.value = blogInfo.description;

			if (changed.posts) {
				each_value = posts;

				for (var i = 0; i < each_value.length; i += 1) {
					const child_ctx = get_each_context(ctx, each_value, i);

					if (each_blocks[i]) {
						each_blocks[i].p(changed, child_ctx);
					} else {
						each_blocks[i] = create_each_block(child_ctx);
						each_blocks[i].c();
						each_blocks[i].m(ul, null);
					}
				}

				for (; i < each_blocks.length; i += 1) {
					each_blocks[i].d(1);
				}
				each_blocks.length = each_value.length;
			}
		},

		i: noop,
		o: noop,

		d: function destroy(detaching) {
			if (detaching) {
				detach(t0);
				detach(input0);
				detach(t1);
				detach(br);
				detach(t2);
				detach(input1);
				detach(t3);
				detach(h1);
				detach(t5);
				detach(ul);
			}

			destroy_each(each_blocks, detaching);

			run_all(dispose);
		}
	};
}

let posts = [];
let blogInfo = {};

function preload() {
  // return fetch('https://sapper-template.now.sh/blog.json')
  // return fetch('http://localhost:5000/blog.json')
  // 	.then(r => r.json())
  // 	.then(arr => {
  // 		posts = arr;
  // 	});
  window.gun.get("headline").on(headLine => {
    blogInfo.title = headLine.title;
    blogInfo.description = headLine.description;
  });
  posts = [];
  window.gun
    .get("posts")
    .map()
    .on(post => {
      posts.push(post);
    });
}

function instance($$self, $$props, $$invalidate) {
	function input0_input_handler() {
		blogInfo.title = this.value;
		$$invalidate('blogInfo', blogInfo);
	}

	function input1_input_handler() {
		blogInfo.description = this.value;
		$$invalidate('blogInfo', blogInfo);
	}

	return {
		input0_input_handler,
		input1_input_handler
	};
}

class Blog extends SvelteComponentDev {
	constructor(options) {
		super(options);
		init(this, options, instance, create_fragment, safe_not_equal, []);
	}
}

export default Blog;
export { preload };
//# sourceMappingURL=Blog-16495f47.js.map
