{"version":3,"file":"Blog-a2f68234.js","sources":["../src/routes/Blog.svelte"],"sourcesContent":["<script>\n  let posts = [];\n  let blogInfo = {};\n  let newPost = {\n\t  title: \"\",\n\t  body: \"\"\n  };\n  function editBlog(e) {\n    if (e.key === \"Enter\") {\n      window.gun\n        .get(\"headline\")\n        .put({ title: blogInfo.title, description: blogInfo.description });\n    }\n  }\n  function handleSubmit(e){\n      if (posts[posts.length - 1] != null) {\n        newPost.id = posts[posts.length - 1].id + 1;\n      } else {\n        newPost.id = 0;\n\t  }\n      window.gun.get(\"posts\").set(newPost);\n  }\n  window.gun.get(\"headline\").on(headLine => {\n    blogInfo.title = headLine.title;\n    blogInfo.description = headLine.description;\n  });\n  \n  var sveltedoesntworkverywell = [];\n  window.gun\n    .get(\"posts\")\n    .map()\n    .on((post, id) => {\n\t\tconsole.log(post, id)\n\t\tif (post != null) {\n\t\t\t// posts.push(post); if only this worked in svelte\n\t\t\tpost.ref = id\n\t\t\tsveltedoesntworkverywell.push(post);\n\t\t} else {\n\t\t\tvar index = posts.findIndex(p => {\n\t\t\t\tpost.ref == p.id\n\t\t\t});\n\t\t\tconsole.log(sveltedoesntworkverywell)\n\t\t\tconsole.log(index)\n\t\t\tsveltedoesntworkverywell = sveltedoesntworkverywell.splice(index, 1);\n\t\t\t//sveltedoesntworkverywell.pop()\n\t\t}\n\t\tposts = sveltedoesntworkverywell;\n    });\n</script>\n\n<style>\n  .blog-title,\n  .blog-description {\n    max-width: 700px;\n    margin: auto;\n    text-align: center;\n    width: 100%;\n    border: none;\n  }\n  .blog-title {\n    font-size: 36px;\n  }\n</style>\n\n<svelte:head>\n  <title>Blog</title>\n</svelte:head>\n\n<input on:keyup={editBlog} class=\"blog-title\" bind:value={blogInfo.title} />\n<br />\n<input on:keyup={editBlog} class=\"blog-description\" bind:value={blogInfo.description} />\n<br />\n<br />\n<br />\n\n<div id=\"posts\">\n  {#each posts as post}\n    <a href=\"/blog/{post.id}\">{post.title}</a>\n    <br />\n     {post.body}\n    <br />\n    <br />\n  {/each}\n</div>\n\n<form id=\"newPost\" on:submit|preventDefault={handleSubmit}>\n<input class=\"new-post-title\" bind:value={newPost.title} placeholder=\"Title\"/>\n<br />\n<input class=\"new-post-body\" bind:value={newPost.body} placeholder=\"Body\" />\n<button>Save post</button>\n</form>\n"],"names":[],"mappings":"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"}